<?phpinclude('GlobalController.php');defined('BASEPATH') OR exit('No direct script access allowed');class Asignatura extends GlobalController{    public function __construct()    {        parent::__construct();        $this->load->model('Asignatura_model');        $this->load->model('Carrera_model');        //echo "valor ".parent::Saludos(7);exit;    }    public function index()    {        $data["level"] = $this->GetLevel();        $data["hours"] = $this->GetHours();        $data["hweek"] = $this->GetHoursWeek();        $data["credit"]= $this->GetCredit();        $data["carreras"] = $this->Carrera_model->ModelAllCarreras();        $data["asignaturas"] = $this->Asignatura_model->ModelGetAsignatura();        $this->load->view('BackEnd/Servicio/ServicioAsignaturaView', $data);    }    public function FormValidateAsignatura()    {        if(isset($_POST['BtnNewAsignatura']))        {            $this->form_validation->set_rules('idAsignatura', 'idAsignatura', 'required|is_unique[5acat_asignatura.idAsignatura]');            $this->form_validation->set_rules('asignatura',   'asignatura',   'required');            $this->form_validation->set_rules('abreviatura',  'abreviatura',  'required');            $this->form_validation->set_rules('cuatrimestre',  'cuatrimestre','is_natural_no_zero');            $this->form_validation->set_rules('hrsCuatrimestre', 'hrsCuatrimestre','is_natural_no_zero');            $this->form_validation->set_rules('hrsSemana', 'hrsSemana','is_natural_no_zero');            $this->form_validation->set_rules('creditos', 'creditos','is_natural_no_zero');            $this->form_validation->set_rules('FkCarrera', 'FkCarrera','is_natural_no_zero');            if($this->form_validation->run() == false)            {                $this->index();            }            else            {                $this->CreateAsignatura();            }        }        else        {            $this->index();        }    }    public function CreateAsignatura()    {       //if($_POST['BtnNewAsignatura'] == 1)        foreach ($_POST as $clave => $valor)        {            if($clave != 'BtnNewAsignatura')            {                $array[$clave] = $valor;            }        }        $status = $this->Asignatura_model->ModelInsertAsignatura($array);        if($status == 1)        {            $this->session->set_flashdata('css', 'success');            $this->session->set_flashdata('mensaje', 'Â¡LA ASIGNATURA FUE REGISTARDA!');            //redirect(base_url().'admin/Grupo/Insert');            redirect(base_url().'BackEnd/Asignatura/index');        }    }    public function GetLevel()    {        $levels = array('0' => 'Seleccione');        for($i = 1; $i <= 12; $i++)        {            $z = "Nivel ".$i;            $levels[$i] = $z;        }        return $levels;    }    public function GetHours()    {        $hours = array('0' => 'Seleccione');        for($i = 1; $i <= 96; $i++)        {            $z = $i." Hora(s)";            $hours[$i] = $z;        }        return $hours;    }    public function GetHoursWeek()    {        $hoursweek = array('0' => 'Seleccione');        for($i = 1; $i <= 6; $i++)        {            $z = $i." Hora(s) por semana";            $hoursweek[$i] = $z;        }        return $hoursweek;    }    public function GetCredit()    {        $credit = array('0' => 'Seleccione');        for($i = 1; $i <= 40; $i++)        {            $z = $i;            $credit[$z] = $z;        }        return $credit;    }}